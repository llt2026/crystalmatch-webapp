# 代码仓库上传前检查清单

## 环境变量配置
- [x] `.env.example` 文件包含所有必要的环境变量
- [x] 确认 `.env` 和 `.env.local` 已添加到 `.gitignore`
- [ ] 检查代码中是否有硬编码的敏感信息（API密钥、密码等）

## 数据库配置
- [x] Prisma schema 已更新
- [x] 添加数据库初始化/迁移说明
- [ ] 确认数据库连接字符串不包含真实凭据

## API 和服务集成
- [x] OpenAI API 集成已更新为 gpt-4.1-nano 模型
- [x] 测试 API 连接脚本工作正常
- [x] 确认 API 错误处理逻辑完善

## 订阅系统
- [x] 订阅类型定义完整
- [x] 订阅服务功能实现
- [x] 基于订阅级别的功能限制已实现
- [x] 添加订阅系统测试

## 文档
- [x] README.md 已更新，包含最新功能描述
- [x] 添加订阅系统的使用说明
- [x] API 文档已更新
- [x] 考虑添加 CHANGELOG.md 记录变更

## 代码质量
- [ ] 删除未使用的代码和注释
- [x] 确保代码注释清晰且最新
- [ ] 检查控制台日志，确保没有调试信息
- [ ] 运行代码格式化工具（如有）

## 测试
- [ ] 运行所有现有测试确保通过
- [x] 测试不同订阅级别的功能
- [x] 测试报告生成和缓存功能
- [x] 测试 API 错误情况下的回退机制

## 版本控制
- [x] 确认 package.json 中的版本号已更新
- [x] 确认所有依赖项都是最新的或指定的版本
- [x] 检查是否有不必要的文件将被上传（如 node_modules, .next 等）

## 安全性
- [ ] 检查是否有潜在的安全漏洞
- [x] 确认用户数据处理符合隐私要求
- [x] 确认 API 端点有适当的权限控制

## 部署准备
- [x] 确认构建脚本工作正常
- [x] 确认应用在生产环境中的配置正确
- [x] 备份当前版本（如已有）

## 最终检查
- [ ] 在本地运行应用，确保主要功能正常
- [ ] 检查控制台是否有错误或警告
- [x] 确认所有文件使用一致的编码（UTF-8） 